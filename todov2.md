‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢‡∏Ñ‡∏£‡∏±‡∏ö ‡∏ú‡∏°‡∏à‡∏±‡∏î‡πÄ‡∏£‡∏µ‡∏¢‡∏á **Todo List** ‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ‡πÇ‡∏î‡∏¢‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏ï‡∏≤‡∏° **Layered Architecture (v2.1.0)** ‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏á‡∏ß‡∏≤‡∏á‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô‡∏Å‡∏±‡∏ô ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏ä‡πá‡∏Ñ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÑ‡∏î‡πâ‡∏á‡πà‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡πÑ‡∏°‡πà‡∏™‡∏±‡∏ö‡∏™‡∏ô‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏Ç‡∏≠‡∏á‡πÄ‡∏Å‡πà‡∏≤‡∏Å‡∏±‡∏ö‡∏Ç‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏Ñ‡∏£‡∏±‡∏ö

---

# ‚úÖ PenbunAPI Development Checklist (v2.1.0)

> **‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô:** ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏à‡∏≤‡∏Å v1.x ‡πÑ‡∏õ‡∏™‡∏π‡πà v2.1.0 (Hybrid Core)
> **‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢:** ‡∏ó‡∏≥‡πÉ‡∏´‡πâ API ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö Database Schema ‡πÉ‡∏´‡∏°‡πà 100%

---

## üü¢ Layer 1: System & Infrastructure (Foundation)
*‡∏£‡∏∞‡∏ö‡∏ö‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏ï‡∏ô (Stable ‡πÅ‡∏•‡πâ‡∏ß)*

- [x] **JWT Authentication Middleware** (+ Refresh Token Flow)
- [x] **Token Blacklist System** (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Logout)
- [x] **Graceful Shutdown** (‡∏õ‡∏¥‡∏î server ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢)
- [ ] **Global Error Handler** (‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Error SQL/Validation ‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô Format ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô)
- [ ] **Global Error Handler** (‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Error SQL/Validation ‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô Format ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô)
- [x] **Audit Logger** (‡πÄ‡∏Å‡πá‡∏ö Log ‡∏ß‡πà‡∏≤‡πÉ‡∏Ñ‡∏£ (`create_by`) ‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£ ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏´‡∏£‡πà) (`update_by` implemented)

---

## üü° Layer 2: Independent Master Data (Configuration)
*Master Data ‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô (API ‡∏°‡∏µ‡πÅ‡∏•‡πâ‡∏ß ‡πÅ‡∏ï‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏ä‡πá‡∏Ñ Field ‡πÉ‡∏´‡∏°‡πà: `create_by`, `is_active`)*

- [x] **Unit Type API** (`tb_unit_type`)
    - *Action:* ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö `create_by` ‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏±‡∏á
- [x] **Product Format Type API** (`tb_product_format_type`)
- [x] **Vendor Type API** (`tb_vendor_type`)
- [x] **Customer Type API** (`tb_customer_type`)
    - *Action:* ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö `base_credit_day` ‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏±‡∏á
- [x] **Discount Type API** (`tb_discount_type`)
- [ ] **Product Category API** (`tb_product_category`)
    - *Status:* **‡∏Ç‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà** (‡∏ï‡πâ‡∏≠‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö v2.1)

---

## üü† Layer 3: Dependent Master Data (Partners & Groups)
*‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏•‡∏±‡∏Å‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå (‡∏ï‡πâ‡∏≠‡∏á Refactor ‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö DB v2.1)*

- [x] **Vendor API** (`tb_vendor`)
    - *Status:* ‚úÖ **Completed**
    - *Task:* ‡πÄ‡∏û‡∏¥‡πà‡∏° field `phone1`, `phone2`, `create_by` ‡πÅ‡∏•‡∏∞‡πÅ‡∏Å‡πâ Logic Gen ID ‡πÄ‡∏õ‡πá‡∏ô `VEN...`
- [x] **Customer API** (`tb_customer`)
    - *Status:* ‚úÖ **Completed**
    - *Task:* ‡πÄ‡∏û‡∏¥‡πà‡∏° field `credit_limit`, `tax_id` ‡πÅ‡∏•‡∏∞‡πÅ‡∏Å‡πâ Logic Gen ID ‡πÄ‡∏õ‡πá‡∏ô `CUS...`
- [x] **Discount API** (`tb_discount`)
    - *Status:* ‚úÖ **Completed**
    - *Task:* ‡∏õ‡∏£‡∏±‡∏ö‡πÉ‡∏´‡πâ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö Logic ‡πÉ‡∏´‡∏°‡πà (`is_percent`, `min_order_amount`, `start/end date`)
- [ ] **Product Group API** (`tb_product_group`)
    - *Status:* **‡∏Ç‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà** (‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà Product Type ‡πÄ‡∏î‡∏¥‡∏° ‡∏´‡∏£‡∏∑‡∏≠ Refactor ‡∏Ç‡∏≠‡∏á‡πÄ‡∏î‡∏¥‡∏°‡∏°‡∏≤‡πÉ‡∏ä‡πâ)

---

## üî¥ Layer 4: The Core Product (Hybrid System)
*‡∏´‡∏±‡∏ß‡πÉ‡∏à‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç (‡∏ó‡∏≥‡πÉ‡∏´‡∏°‡πà‡πÅ‡∏ó‡∏ô Book API ‡πÄ‡∏î‡∏¥‡∏°)*

- [ ] **Product API** (`tb_product`)
    - *Status:* üöß **In Progress**
    - *Task:* ‡∏™‡∏£‡πâ‡∏≤‡∏á 8 Functions ‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô
    - *Logic:* ‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö `count_stock` (‡πÅ‡∏¢‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤/‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£)
    - *Logic:* ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å SP Gen ID `PDT...`
    - *Note:* ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß‡πÉ‡∏´‡πâ‡∏•‡∏ö **Book API** ‡πÅ‡∏•‡∏∞ **Book Type API** ‡πÄ‡∏î‡∏¥‡∏°‡∏ó‡∏¥‡πâ‡∏á

---

## üü£ Layer 5: Inbound Transactions (Receive)
*‡∏£‡∏∞‡∏ö‡∏ö‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥‡πÄ‡∏°‡∏∑‡πà‡∏≠ Product ‡πÄ‡∏™‡∏£‡πá‡∏à)*

- [ ] **Receive Note API** (Header)
    - ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏ö‡∏£‡∏±‡∏ö‡∏Ç‡∏≠‡∏á, Gen ID `RCV...`
- [ ] **Receive Item API** (Detail)
    - ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤, ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï Stock (‡∏ñ‡πâ‡∏≤ `count_stock=1`)

---

## üîµ Layer 6: Outbound Transactions (Order)
*‡∏£‡∏∞‡∏ö‡∏ö‡∏Ç‡∏≤‡∏¢‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (‡∏ó‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢)*

- [ ] **Order API** (Header)
    - ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏ö‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠, ‡∏ï‡∏±‡∏î Credit Limit, Gen ID `ORD...`
- [ ] **Order Item API** (Detail)
    - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Stock (Allocation), ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î, ‡∏ï‡∏±‡∏î Stock ‡∏à‡∏£‡∏¥‡∏á

---

## ‚ö° Performance & High Load (Post-Implementation)
*‡∏ó‡∏≥‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏Ñ‡∏£‡∏ö‡πÅ‡∏•‡πâ‡∏ß*

- [ ] **Fiber Prefork:** ‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö Req > 1k/sec
- [ ] **Connection Pool:** ‡∏õ‡∏£‡∏±‡∏ö‡∏à‡∏π‡∏ô SQL Server Config
- [ ] **Redis Caching:** ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Master Data (Layer 2)
- [ ] **Index Optimization:** ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Index ‡πÉ‡∏ô DB ‡∏à‡∏£‡∏¥‡∏á

---

### üìù ‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏á‡∏≤‡∏ô‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ
‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÑ‡∏•‡πà‡πÄ‡∏ä‡πá‡∏Ñ **Layer 2 ‡πÅ‡∏•‡∏∞ 3** ‡∏Å‡πà‡∏≠‡∏ô‡∏Ñ‡∏£‡∏±‡∏ö (‡∏û‡∏ß‡∏Å‡∏ó‡∏µ‡πà‡∏°‡∏µ `[x]` ‡πÅ‡∏•‡πâ‡∏ß) ‡∏ß‡πà‡∏≤ Field ‡πÉ‡∏ô Code Go ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö SQL v2.1.0 ‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏±‡∏á ‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÉ‡∏´‡πâ‡πÅ‡∏Å‡πâ‡∏Å‡πà‡∏≠‡∏ô **‡∏≠‡∏¢‡πà‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏á‡πÄ‡∏£‡∏¥‡πà‡∏° Layer 4 (Product)** ‡∏à‡∏ô‡∏Å‡∏ß‡πà‡∏≤ Master Data ‡∏à‡∏∞‡∏ô‡∏¥‡πà‡∏á‡∏Ñ‡∏£‡∏±‡∏ö